---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Services from '../components/Services.astro';
import WhyUs from '../components/WhyUs.astro';
import CTA from '../components/CTA.astro';
import Hero from "../components/Hero.astro";


const allServices = await getCollection('services');

// Spesifiser typen i sort-funksjonen for Ã¥ fjerne TypeScript-feilen
const sortedServices = allServices.sort((a: CollectionEntry<'services'>, b: CollectionEntry<'services'>) => {
  return (a.data.order ?? 0) - (b.data.order ?? 0);
});

// Formater data for komponenten
const serviceItems = sortedServices.map((s: CollectionEntry<'services'>) => ({
  title: s.data.title,
  desc: s.data.description,
  icon: s.data.icon ?? "" // Sikrer at icon alltid er en streng
}));
---

<Layout title="Comino Web - Nettsider fra bunnen av">
  <main>
    <!-- Hero Section -->
    <Hero />

  <!-- Features Section -->
  <Services items={serviceItems} />

  <WhyUs />

  <!-- CTA Section -->
  <CTA />
</Layout>
