---
/* src/components/Cta.astro */
interface Props {
  title?: string;
  description?: string;
  ctaText?: string;
  ctaLink?: string;
  secondaryText?: string;
  secondaryLink?: string;
}

const { 
  title, 
  description, 
  ctaText = "Kontakt oss", 
  ctaLink = "#", // Vi endrer default fra /kontakt til # siden vi bruker drawer
  secondaryText,
  secondaryLink,
} = Astro.props;

// BOKMÅL FALLBACK-LOGIKK
const displayTitle = title || "Klar for å realisere neste store prosjekt?";
const displayDescription = description || "Uansett om du trenger en lynrask bedriftsside eller en kompleks webapplikasjon, står vi klare til å hjelpe deg med moderne teknologi og rådgivning.";
---

<section class="bg-page-light dark:bg-page-dark transition-colors duration-500">
  <div class="container mx-auto px-6 py-24">
    <div
      class="relative overflow-hidden rounded-[2.5rem] 
             bg-white dark:bg-slate-900/50 
             px-8 py-16 shadow-2xl shadow-blue-900/5 dark:shadow-none
             md:px-16 md:py-24 
             border border-slate-200 dark:border-slate-800 
             transition-all duration-500 group"
    >
      {/* SVG Rutenett (uendret) */}
      <svg class="absolute inset-0 h-full w-full pointer-events-none opacity-[0.07] dark:opacity-[0.15]" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern id="cta-grid" width="40" height="40" patternUnits="userSpaceOnUse">
            <path d="M 40 0 L 0 0 0 40" fill="none" stroke="currentColor" stroke-width="1" class="text-slate-400 dark:text-blue-500" />
          </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#cta-grid)" />
      </svg>

      <div class="relative z-10 flex flex-col items-center text-center">
        <h2 class="text-3xl md:text-5xl font-bold tracking-tight text-slate-900 dark:text-white mb-6 italic leading-[1.1]">
          {displayTitle}
        </h2>

        <p class="max-w-xl text-lg md:text-xl text-slate-600 dark:text-slate-400 mb-10 leading-relaxed">
          {displayDescription}
        </p>

        <div class="flex flex-col sm:flex-row gap-4">
          {/* HOVEDKNAPP: Her legger vi til 'open-contact-drawer' klassen */}
          <a 
            href={ctaLink} 
            class:list={[
              "inline-flex items-center justify-center bg-primary hover:bg-primary-hover transition-all text-white px-8 py-4 rounded-xl font-bold hover:scale-105 shadow-lg shadow-primary/20",
              ctaLink === "#" || ctaLink === "/kontakt" ? "open-contact-drawer" : ""
            ]}
          >
            {ctaText}
            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </a>
          
          {secondaryText && (
            <a href={secondaryLink || "/prosjekt"} class="inline-flex items-center justify-center bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-700/50 px-8 py-4 rounded-xl text-lg font-bold hover:bg-slate-100 dark:hover:bg-slate-800 transition-all">
              {secondaryText}
            </a>
          )}
        </div>
      </div>
    </div>
  </div>
</section>